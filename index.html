<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lotomania Inteligente - Gerador de Jogos</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 50%, #9b59b6 100%);
            background-attachment: fixed;
            min-height: 100vh;
            padding: 20px;
            color: #2c3e50;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            background: linear-gradient(45deg, #e74c3c, #f39c12);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .header p {
            color: #7f8c8d;
            font-size: 1.2em;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .btn {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
            font-weight: bold;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(52, 152, 219, 0.4);
        }

        .btn.primary {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
        }

        .btn.primary:hover {
            box-shadow: 0 8px 25px rgba(231, 76, 60, 0.4);
        }

        .btn.success {
            background: linear-gradient(45deg, #27ae60, #229954);
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.3);
        }

        .games-control {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        #gamesQuantity {
            width: 80px;
            padding: 12px;
            border: 2px solid #3498db;
            border-radius: 25px;
            text-align: center;
            font-size: 16px;
            font-weight: bold;
            outline: none;
            transition: all 0.3s ease;
        }

        #gamesQuantity:focus {
            border-color: #e74c3c;
            box-shadow: 0 0 10px rgba(231, 76, 60, 0.3);
        }

        .last-result-section {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            border-radius: 20px;
            padding: 30px;
            color: white;
            margin-bottom: 40px;
            display: none;
        }

        .last-result-section h2 {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .contest-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .contest-detail {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            flex: 1;
            min-width: 200px;
        }

        .last-numbers {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(40px, 1fr));
            gap: 8px;
            max-width: 800px;
            margin: 0 auto 20px;
        }

        .last-number {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background: linear-gradient(45deg, #f39c12, #e67e22);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 14px;
            animation: fadeInUp 0.5s ease;
        }

        .games-section {
            display: none;
        }

        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .game-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #3498db;
            transition: all 0.3s ease;
        }

        .game-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        }

        .game-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .game-numbers {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 6px;
            margin-bottom: 15px;
        }

        .game-number {
            width: 30px;
            height: 30px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 12px;
            background: linear-gradient(45deg, #9b59b6, #8e44ad);
        }

        .strategy-info {
            background: rgba(52, 152, 219, 0.1);
            padding: 10px;
            border-radius: 8px;
            font-size: 0.9em;
            color: #2c3e50;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        .analysis-panel {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #f39c12;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .pulse-animation {
            animation: pulse 2s infinite;
        }

            @media (max-width: 768px) {
                .container {
                    padding: 20px;
                }
                
                .header h1 {
                    font-size: 2.2em;
                }
                
                .controls {
                    flex-direction: column;
                    align-items: center;
                }
                
                .games-control {
                    flex-direction: column;
                    gap: 15px;
                }
                
                #gamesQuantity {
                    width: 120px;
                }
                
                .games-grid {
                    grid-template-columns: 1fr;
                }
                
                .game-numbers {
                    grid-template-columns: repeat(5, 1fr);
                }
                
                .last-numbers {
                    grid-template-columns: repeat(10, 1fr);
                }
            }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ Lotomania Inteligente</h1>
            <p>Gerador autom√°tico de 10 jogos baseados em an√°lise do √∫ltimo concurso</p>
        </div>

        <div class="controls">
            <button class="btn primary" onclick="fetchLastResult()">üé≤ Buscar √öltimo Concurso</button>
            <div class="games-control">
                <input type="number" id="gamesQuantity" min="1" max="20" value="10" placeholder="Qtd de jogos">
                <button class="btn success" onclick="generateGames()" id="generateBtn" disabled>üöÄ Gerar Jogos Inteligentes</button>
            </div>
            <button class="btn" onclick="clearAll()">üîÑ Limpar Tudo</button>
        </div>

        <div id="lastResultSection" class="last-result-section">
            <h2>üèÜ √öltimo Concurso da Lotomania</h2>
            
            <div class="contest-info">
                <div class="contest-detail">
                    <h4>üìä Informa√ß√µes do Concurso</h4>
                    <p id="contestNumber">-</p>
                    <p id="contestDate">-</p>
                </div>
                <div class="contest-detail">
                    <h4>üí∞ Premia√ß√£o Principal</h4>
                    <p id="mainPrize">-</p>
                    <p id="winners">-</p>
                </div>
            </div>

            <h3 style="text-align: center; margin-bottom: 15px;">üé± N√∫meros Sorteados</h3>
            <div id="lastNumbers" class="last-numbers"></div>

            <div class="analysis-panel">
                <h4>üìà An√°lise R√°pida do Concurso</h4>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value" id="evenCount">-</div>
                        <div>N√∫meros Pares</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="oddCount">-</div>
                        <div>N√∫meros √çmpares</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="sumTotal">-</div>
                        <div>Soma Total</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="avgNumber">-</div>
                        <div>M√©dia</div>
                    </div>
                </div>
            </div>
        </div>

        <div id="gamesSection" class="games-section">
            <h2 style="text-align: center; margin-bottom: 30px; color: #2c3e50;">
                üéÆ 10 Jogos Gerados Inteligentemente
            </h2>
            <div id="gamesGrid" class="games-grid"></div>
        </div>
    </div>

    <script>
        let lastResultData = null;
        
        async function fetchLastResult() {
            const section = document.getElementById('lastResultSection');
            const contestNumber = document.getElementById('contestNumber');
            const contestDate = document.getElementById('contestDate');
            const mainPrize = document.getElementById('mainPrize');
            const winners = document.getElementById('winners');
            const numbersContainer = document.getElementById('lastNumbers');
            
            section.style.display = 'block';
            numbersContainer.innerHTML = '<div class="loading"></div>';
            contestNumber.textContent = 'Carregando...';
            
            try {
                // Tenta buscar da API oficial da Caixa
                const response = await fetch('https://servicebus2.caixa.gov.br/portaldeloterias/api/lotomania/');
                
                if (!response.ok) {
                    throw new Error('Erro na API');
                }
                
                const data = await response.json();
                lastResultData = data;
                
                // Exibe informa√ß√µes do concurso
                contestNumber.textContent = 'Concurso: ' + data.numero;
                contestDate.textContent = 'Data: ' + data.dataApuracao;
                
                // Informa√ß√µes de premia√ß√£o
                if (data.listaRateioPremio && data.listaRateioPremio.length > 0) {
                    const firstPrize = data.listaRateioPremio[0];
                    mainPrize.textContent = 'R$ ' + firstPrize.valorPremio.toLocaleString('pt-BR', {minimumFractionDigits: 2});
                    winners.textContent = firstPrize.numeroDeGanhadores + ' ganhadores';
                }
                
                // Exibe os n√∫meros sorteados
                displayLastNumbers(data.dezenasSorteadasOrdemSorteio || data.listaDezenas);
                
                // An√°lise dos n√∫meros
                analyzeLastResult(data.dezenasSorteadasOrdemSorteio || data.listaDezenas);
                
                // Habilita o bot√£o de gerar jogos
                document.getElementById('generateBtn').disabled = false;
                
            } catch (error) {
                console.log('Erro ao buscar dados da API, usando dados simulados:', error);
                
                // Dados simulados para teste
                const simulatedData = {
                    numero: 2654,
                    dataApuracao: '27/07/2025',
                    numbers: ['05', '12', '18', '23', '31', '37', '42', '48', '53', '59', '64', '71', '76', '82', '88', '94', '97', '02', '15', '29']
                };
                
                lastResultData = simulatedData;
                
                contestNumber.textContent = 'Concurso: ' + simulatedData.numero;
                contestDate.textContent = 'Data: ' + simulatedData.dataApuracao;
                mainPrize.textContent = 'R$ 2.847.531,22';
                winners.textContent = '1 ganhador';
                
                displayLastNumbers(simulatedData.numbers);
                analyzeLastResult(simulatedData.numbers);
                
                document.getElementById('generateBtn').disabled = false;
            }
        }
        
        function displayLastNumbers(numbers) {
            const container = document.getElementById('lastNumbers');
            container.innerHTML = '';
            
            // Ordena os n√∫meros em ordem crescente
            const sortedNumbers = numbers.map(function(num) {
                return parseInt(num);
            }).sort(function(a, b) {
                return a - b;
            });
            
            sortedNumbers.forEach(function(num, index) {
                setTimeout(function() {
                    const numberDiv = document.createElement('div');
                    numberDiv.className = 'last-number';
                    numberDiv.textContent = num.toString().padStart(2, '0');
                    numberDiv.style.animationDelay = (index * 0.05) + 's';
                    container.appendChild(numberDiv);
                }, index * 50);
            });
        }
        
        function analyzeLastResult(numbers) {
            let evenCount = 0;
            let oddCount = 0;
            let sum = 0;
            
            numbers.forEach(function(num) {
                const n = parseInt(num);
                sum += n;
                if (n % 2 === 0) {
                    evenCount++;
                } else {
                    oddCount++;
                }
            });
            
            const avg = Math.round(sum / numbers.length);
            
            document.getElementById('evenCount').textContent = evenCount;
            document.getElementById('oddCount').textContent = oddCount;
            document.getElementById('sumTotal').textContent = sum;
            document.getElementById('avgNumber').textContent = avg;
        }
        
        function generateGames() {
            if (!lastResultData) {
                alert('Primeiro busque o √∫ltimo resultado!');
                return;
            }
            
            const quantity = parseInt(document.getElementById('gamesQuantity').value);
            
            if (quantity < 1 || quantity > 20) {
                alert('Digite uma quantidade entre 1 e 20 jogos!');
                return;
            }
            
            const gamesSection = document.getElementById('gamesSection');
            const gamesGrid = document.getElementById('gamesGrid');
            
            gamesSection.style.display = 'block';
            gamesGrid.innerHTML = '<div style="text-align: center; padding: 40px;"><div class="loading"></div><p>Gerando ' + quantity + ' jogos inteligentes...</p></div>';
            
            // Atualiza o t√≠tulo da se√ß√£o
            const sectionTitle = gamesSection.querySelector('h2');
            sectionTitle.textContent = 'üéÆ ' + quantity + ' Jogos Gerados Inteligentemente';
            
            setTimeout(function() {
                const games = generateIntelligentGames(quantity);
                displayGames(games);
            }, 2000);
        }
        
        function generateIntelligentGames(quantity) {
            const games = [];
            const strategies = [
                'Baseado em n√∫meros quentes',
                'Foco em n√∫meros frios',
                'Distribui√ß√£o equilibrada',
                'Padr√£o par/√≠mpar otimizado',
                'Sequ√™ncia matem√°tica',
                'An√°lise de quadrantes',
                'N√∫meros primos priorizados',
                'Distribui√ß√£o por dezenas',
                'Padr√£o fibonacci',
                'Combina√ß√£o h√≠brida',
                'Foco em extremos (0-20, 80-99)',
                'N√∫meros centrais (30-70)',
                'Padr√£o alternado',
                'M√∫ltiplos favor√°veis',
                'Sequ√™ncia invertida',
                'Distribui√ß√£o gaussiana',
                'N√∫meros terminados em 0',
                'Padr√£o diagonal',
                'N√∫meros crescentes',
                'Estrat√©gia mista avan√ßada'
            ];
            
            for (let i = 0; i < quantity; i++) {
                const game = generateSingleGame(i);
                games.push({
                    numbers: game,
                    strategy: strategies[i % strategies.length],
                    gameNumber: i + 1
                });
            }
            
            return games;
        }
        
        function generateSingleGame(gameIndex) {
            const numbers = [];
            const usedNumbers = new Set();
            
            // Diferentes estrat√©gias por jogo
            switch (gameIndex) {
                case 0: // N√∫meros quentes (baseado no √∫ltimo resultado)
                    const lastNumbers = lastResultData.numbers || lastResultData.dezenasSorteadasOrdemSorteio || [];
                    for (let i = 0; i < 8 && i < lastNumbers.length; i++) {
                        const num = parseInt(lastNumbers[i]);
                        if (num >= 0 && num <= 99) {
                            numbers.push(num);
                            usedNumbers.add(num);
                        }
                    }
                    break;
                    
                case 1: // N√∫meros frios (n√£o apareceram)
                    const hotNums = new Set();
                    if (lastResultData.numbers) {
                        lastResultData.numbers.forEach(n => hotNums.add(parseInt(n)));
                    }
                    let coldCount = 0;
                    for (let n = 0; n <= 99 && coldCount < 12; n++) {
                        if (!hotNums.has(n) && Math.random() > 0.7) {
                            numbers.push(n);
                            usedNumbers.add(n);
                            coldCount++;
                        }
                    }
                    break;
                    
                case 2: // Distribui√ß√£o equilibrada
                    for (let decade = 0; decade < 10; decade++) {
                        if (Math.random() > 0.3) {
                            const num = decade * 10 + Math.floor(Math.random() * 10);
                            if (!usedNumbers.has(num)) {
                                numbers.push(num);
                                usedNumbers.add(num);
                            }
                        }
                    }
                    break;
                    
                default: // Estrat√©gias variadas
                    // Gera n√∫meros aleat√≥rios com algumas prefer√™ncias
                    while (numbers.length < 50) {
                        let num;
                        if (gameIndex % 2 === 0) {
                            // Prefere n√∫meros pares
                            num = Math.floor(Math.random() * 50) * 2;
                        } else {
                            // Prefere n√∫meros √≠mpares
                            num = Math.floor(Math.random() * 50) * 2 + 1;
                        }
                        
                        if (num <= 99 && !usedNumbers.has(num)) {
                            numbers.push(num);
                            usedNumbers.add(num);
                        }
                    }
            }
            
            // Completa at√© 50 n√∫meros se necess√°rio
            while (numbers.length < 50) {
                const num = Math.floor(Math.random() * 100);
                if (!usedNumbers.has(num)) {
                    numbers.push(num);
                    usedNumbers.add(num);
                }
            }
            
            return numbers.slice(0, 50).sort(function(a, b) { return a - b; });
        }
        
        function displayGames(games) {
            const gamesGrid = document.getElementById('gamesGrid');
            gamesGrid.innerHTML = '';
            
            games.forEach(function(game, index) {
                setTimeout(function() {
                    const gameCard = document.createElement('div');
                    gameCard.className = 'game-card';
                    gameCard.style.animationDelay = (index * 0.1) + 's';
                    
                    gameCard.innerHTML = 
                        '<h3>üéØ Jogo ' + game.gameNumber + '</h3>' +
                        '<div class="game-numbers" id="gameNumbers' + index + '"></div>' +
                        '<div class="strategy-info">' +
                        '<strong>Estrat√©gia:</strong> ' + game.strategy +
                        '</div>';
                    
                    gamesGrid.appendChild(gameCard);
                    
                    // Adiciona os n√∫meros do jogo
                    const numbersContainer = document.getElementById('gameNumbers' + index);
                    game.numbers.forEach(function(num, numIndex) {
                        setTimeout(function() {
                            const numberDiv = document.createElement('div');
                            numberDiv.className = 'game-number';
                            numberDiv.textContent = num.toString().padStart(2, '0');
                            numbersContainer.appendChild(numberDiv);
                        }, numIndex * 20);
                    });
                    
                }, index * 200);
            });
        }
        
        function clearAll() {
            document.getElementById('lastResultSection').style.display = 'none';
            document.getElementById('gamesSection').style.display = 'none';
            document.getElementById('generateBtn').disabled = true;
            lastResultData = null;
        }
        
        // Auto-carrega o √∫ltimo resultado quando a p√°gina abre
        window.onload = function() {
            setTimeout(function() {
                fetchLastResult();
            }, 1000);
        };
    </script>
</body>
</html>